# 断言

在看`Objects`类的时候发现如果调用了`Objects`类的私有构造函数，将会抛出`AssertionError`异常，该类继承自`Error`，是非常严重的、不可错误的异常，开发人员需要对其进行处理。先不管这个异常是如何使用的，首先这个名字让我立即想到了“assert”这个关键字，我一直认为这是一个鸡肋，因为同样的功能使用if-else或者异常就可以代替，断言有什么用呢？

最近在看JDK源码，并且在项目中经常看到别人用断言语句，另外就是测试的时候经常用，意识到自己可能忽略了，断言是可以改善代码质量的，所以这次重新捡起来。

首先需要了解语法。

#### 语法
`assert`是JDK1.4中引入的新关键字，用于在程序开发中创建“断言”。什么是断言？就是“断定会出现某种情况，如果结果非预期，那么就一定是哪里发生了错误”，它具有两种语法形式：
* assert Condition
这里的condition必须是一个结果为true的布尔表达式。它表示，“预期结果一定为真，如果预测失败了，就一定哪里出了问题”。即如果表达式为true，就是预期的值，那么什么也不做，程序该怎么走就怎么走。如果表达式的结果为false，预计失败了，那么就抛出一个`AssertionError`异常，它继承自`Error`类，属于JVM严重错误了。

* assert condition: expr
这里的condition和上面一样，是一个预期结果为true的布尔表达式。如果预期对了，那么什么都不做；如果错了，就抛出一个`AssertionError`异常，与上面的情况不同的是，这个异常创建的时候将`expr`作为参数，值被转化为它对应的字符串，并显示出来。其他情况均相同。

根据以上的内容说明，下面是一个测试程序：
```java
public class AssertTest {

    public static void main(String[] args) {
        AssertTest test = new AssertTest();
        test.test(true);
        test.test(false);

    }

    public void test(boolean param){
        assert param;

        System.out.println("true param");
    }
}
```
【JDK1.8下】代码编译、运行都没有问题，但是执行结果为打印了两次"true param"，诶，断言语句好像没有作用。实际上，这段代码的编译和运行都有一些地方需要注意。首先，由于assert是1.4引入的，所以在编译的时候需要指定JDK为1.4之上的版本，否则编译会报错，使用语句为`javac -source 1.4 AssertTest.java`，当然，很多IDE已经帮你选择好了JDK版本，而且现在基本上都比1.4高。另外，默认情况下，断言是关闭状态，要想使得断言语句发挥作用，需要利用语句`java -ea  AssertTest.class`来打开断言功能。所以上面这段代码的执行结果是：
```java
true param
Exception in thread "main" java.lang.AssertionError
        at AssertTest.test(AssertTest.java:18)
        at AssertTest.main(AssertTest.java:13)
```
这次终于抛出异常了。

> 一般情况下，断言是关闭状态，使用开关语句`-ae`才能打开断言功能





参考
* [ Java断言机制](http://blog.csdn.net/wwj_748/article/details/8066419)
*
